# Broker 3 Configuration (Leaf)
# -----------------------------
# Role: Leaf node in the Star Topology.
# This broker initiates a persistent bridge connection to the Hub (mosquitto1).

listener 1883
allow_anonymous true

# Bridge Configuration
# connection: Unique name for this bridge link
connection bridge-to-hub
# address: Target broker (the Hub)
address mosquitto1:1883
# topic: Pattern to replicate. 
# '#' = All topics, 'both' = Bi-directional, '1' = QoS 1 for reliability
topic # both 1
# try_private: If true, tells the hub this is a bridge, enabling loop prevention
try_private true
# cleansession: false would keep the bridge session alive during leaf restarts
cleansession true

log_dest stdout
