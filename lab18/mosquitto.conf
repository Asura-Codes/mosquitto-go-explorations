listener 1883
allow_anonymous false

# Persistence
persistence true
persistence_location /mosquitto/data/

# Plugin Configuration
auth_plugin /mosquitto/go-auth.so
auth_opt_backends http
auth_opt_check_prefix false

# HTTP Backend Configuration
auth_opt_http_host auth-service
auth_opt_http_port 8080
auth_opt_http_getuser_uri /user
auth_opt_http_superuser_uri /superuser
auth_opt_http_aclcheck_uri /acl

# Connection timeout and other settings
auth_opt_http_with_tls false
auth_opt_cache true
auth_opt_cache_reset true
auth_opt_log_level debug
